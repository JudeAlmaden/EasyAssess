import{_ as D}from"./AppLayout.vue_vue_type_script_setup_true_lang-BnqqrvPP.js";import{_ as V}from"./Input.vue_vue_type_script_setup_true_lang-hMw7eILb.js";import{_ as E}from"./index-BPcQqCfh.js";import{_ as T,a as j,b as O}from"./CardHeader.vue_vue_type_script_setup_true_lang-Bn4Opon9.js";import{_ as M,a as N,b as v,c as f,d as A,e as m,f as F}from"./BaseModal-CXQw6ydB.js";import{d as L,r as c,c as R,o as B,a as y,b as w,w as o,e as u,f as a,u as r,S as x,g as n,h as U,F as q,i as Q,t as _}from"./app-lvJkcK5D.js";import{E as J}from"./eye-BfwL90iW.js";import"./useForwardExpose-BFqVVqqo.js";import"./RovingFocusGroup-CJmLcH9n.js";import"./createLucideIcon-Dk3g_DrK.js";import"./AppLogo.vue_vue_type_style_index_0_lang-BmC-BNjO.js";import"./preload-helper-BfFHrpNk.js";/* empty css            */import"./_commonjsHelpers-Bx2EM-6T.js";const K={class:"p-5"},P={class:"flex gap-2 items-center"},X={class:"flex justify-center items-center gap-2"},Y={class:"text-gray-800 dark:text-gray-200"},de=L({__name:"index",setup(z){const h=[{title:"Your OMR Sheets",href:"/omr-sheets"}],p=c([]),d=c(""),i=c(!1),l=c(null);async function g(){try{const t=await fetch(route("omr_sheets.get"),{headers:{Accept:"application/json"},credentials:"include"});if(!t.ok)throw new Error("Failed to fetch sheets");const e=await t.json();p.value=e.OMRSheets}catch(t){console.error("Error fetching sheets:",t)}}const k=R(()=>{if(!d.value.trim())return p.value;const t=d.value.toLowerCase();return p.value.filter(e=>{var s;return e.title.toLowerCase().includes(t)||((s=e.description)==null?void 0:s.toLowerCase().includes(t))})});function C(t){return new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}function S(){const t=document.querySelector('meta[name="csrf-token"]');if(!(t!=null&&t.content))throw new Error("CSRF token not found");return t.content}function $(t){l.value=t,i.value=!0}async function b(){if(l.value)try{const t=S();if(!(await fetch(route("omr_sheet.delete"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","X-CSRF-TOKEN":t},credentials:"include",body:JSON.stringify({id:l.value.id})})).ok)throw new Error("Delete failed");i.value=!1,l.value=null,g()}catch(t){console.error("Error deleting sheet:",t)}}return B(g),(t,e)=>(w(),y(D,{breadcrumbs:h},{default:o(()=>[u("div",K,[a(r(T),null,{default:o(()=>[a(r(j),null,{default:o(()=>[u("div",P,[a(r(V),{modelValue:d.value,"onUpdate:modelValue":e[0]||(e[0]=s=>d.value=s),placeholder:"Search OMR Sheet..."},null,8,["modelValue"]),a(r(x),{href:t.route("omr_sheet.make"),target:"_blank",class:"px-4 py-2 bg-foreground text-background rounded text-sm"},{default:o(()=>e[3]||(e[3]=[n(" Create ")])),_:1,__:[3]},8,["href"])])]),_:1}),a(r(O),null,{default:o(()=>[a(r(M),null,{default:o(()=>[a(r(N),null,{default:o(()=>[a(r(v),null,{default:o(()=>[a(r(f),{class:"w-1/4"},{default:o(()=>e[4]||(e[4]=[n("Title")])),_:1,__:[4]}),a(r(f),{class:"w-1/4"},{default:o(()=>e[5]||(e[5]=[n("Description")])),_:1,__:[5]}),a(r(f),{class:"w-1/4 text-right"},{default:o(()=>e[6]||(e[6]=[n("Created At")])),_:1,__:[6]}),a(r(f),{class:"w-1/4 text-center"},{default:o(()=>e[7]||(e[7]=[n("Actions")])),_:1,__:[7]})]),_:1})]),_:1}),a(r(A),null,{default:o(()=>[(w(!0),U(q,null,Q(k.value,s=>(w(),y(r(v),{key:s.id},{default:o(()=>[a(r(m),{class:"w-1/4 font-medium"},{default:o(()=>[n(_(s.title),1)]),_:2},1024),a(r(m),{class:"w-1/4"},{default:o(()=>[n(_(s.description||"None"),1)]),_:2},1024),a(r(m),{class:"w-1/4 text-right"},{default:o(()=>[n(_(C(s.created_at)),1)]),_:2},1024),a(r(m),{class:"w-1/4 text-center"},{default:o(()=>[u("div",X,[a(r(x),{href:t.route("omr_sheet.view",[s.id]),target:"_blank",class:"w-32 px-3 py-2 text-sm bg-primary text-primary-foreground rounded-md hover:opacity-90 transition-colors flex items-center justify-center gap-1 shadow-md"},{default:o(()=>[e[8]||(e[8]=n(" View ")),a(r(J),{class:"w-4 h-4"})]),_:2,__:[8]},1032,["href"]),a(r(E),{onClick:G=>$(s),class:"w-32 px-3 py-2 text-sm bg-destructive text-destructive-foreground rounded-md hover:opacity-90 transition-colors flex items-center justify-center gap-1 shadow-md"},{default:o(()=>e[9]||(e[9]=[n(" Delete ")])),_:2,__:[9]},1032,["onClick"])])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),a(r(F),{modelValue:i.value,"onUpdate:modelValue":e[1]||(e[1]=s=>i.value=s),title:"Confirm Delete",onConfirm:b,onCancel:e[2]||(e[2]=()=>{i.value.value=!1,l.value.value=null})},{default:o(()=>{var s;return[u("p",Y,[e[10]||(e[10]=n(" Are you sure you want to delete ")),u("strong",null,_((s=l.value)==null?void 0:s.title),1),e[11]||(e[11]=n("? "))])]}),_:1},8,["modelValue"])]),_:1}))}});export{de as default};
