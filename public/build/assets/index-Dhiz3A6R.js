import{d as Z,r as n,c as ee,o as te,a as O,b as u,w as r,e as l,f as a,u as o,g as i,h as d,F as A,i as T,t as m,S as se,j as oe,k,v as F,l as N,n as U}from"./app-lvJkcK5D.js";import{_ as re}from"./AppLayout.vue_vue_type_script_setup_true_lang-BnqqrvPP.js";import{_ as ae}from"./Input.vue_vue_type_script_setup_true_lang-hMw7eILb.js";import{_ as L}from"./index-BPcQqCfh.js";import{_ as le,a as ne,b as ie}from"./CardHeader.vue_vue_type_script_setup_true_lang-Bn4Opon9.js";import{_ as ue,a as de,b as P,c as h,d as ce,e as C,f as B}from"./BaseModal-CXQw6ydB.js";import{c as fe}from"./createLucideIcon-Dk3g_DrK.js";import"./preload-helper-BfFHrpNk.js";/* empty css            */import"./_commonjsHelpers-Bx2EM-6T.js";import"./useForwardExpose-BFqVVqqo.js";import"./RovingFocusGroup-CJmLcH9n.js";import"./AppLogo.vue_vue_type_style_index_0_lang-BmC-BNjO.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=fe("TrashIcon",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]),pe={class:"p-5"},ve={class:"flex gap-2 items-center"},ge={class:"flex justify-center items-center gap-2"},ye={class:"text-gray-800 dark:text-gray-200"},be={key:0},we={class:"flex justify-end mt-4"},_e={key:1},xe=["value"],ke=["value"],he={class:"flex justify-center mt-6"},Le=Z({__name:"index",setup(Ce){const q=[{title:"Assessments",href:"/assessments"}],V=n([]),E=n([]),M=n([]),v=n(""),p=n(!1),c=n(null),g=n(!1),f=n(1),y=n(""),b=n(""),w=n(null),_=n(null),S=n(!1);function $(){const s=document.querySelector('meta[name="csrf-token"]');if(!(s!=null&&s.content))throw new Error("CSRF token not found");return s.content}async function j(){try{const s=await fetch(route("assessments.get"),{headers:{Accept:"application/json"},credentials:"include"});if(!s.ok)throw new Error("Failed to fetch assessments");const e=await s.json();V.value=e.data.map(t=>t.assessment)}catch(s){console.error("Error fetching assessments:",s)}}async function I(){try{const s=await fetch(route("omr_sheets.get"),{headers:{Accept:"application/json"},credentials:"include"});if(!s.ok)throw new Error("Failed to fetch OMR sheets");const e=await s.json();E.value=e.OMRSheets}catch(s){console.error("Error fetching OMR sheets:",s)}}async function J(){try{const s=await fetch(route("dictionaries.get"),{headers:{Accept:"application/json"},credentials:"include"});if(!s.ok)throw new Error("Failed to fetch dictionaries");const e=await s.json();M.value=e.dictionaries}catch(s){console.error("Error fetching dictionaries:",s)}}const K=ee(()=>{if(!v.value.trim())return V.value;const s=v.value.toLowerCase();return V.value.filter(e=>{var t;return e.title.toLowerCase().includes(s)||((t=e.description)==null?void 0:t.toLowerCase().includes(s))})});function Q(s){return new Date(s).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})}function X(s){c.value=s,p.value=!0}async function z(){if(c.value)try{const s=$();if(!(await fetch(route("assessment.delete"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","X-CSRF-TOKEN":s},credentials:"include",body:JSON.stringify({id:c.value.id})})).ok)throw new Error("Delete failed");p.value=!1,c.value=null,j()}catch(s){console.error("Error deleting assessment:",s)}}function H(){g.value=!0}function G(){R()}function R(){g.value=!1,S.value=!1,f.value=1,y.value="",b.value="",w.value=null,_.value=null}async function W(s,e,t,x){try{const D=$();if(!(await fetch(route("assessment.create"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","X-CSRF-TOKEN":D},credentials:"include",body:JSON.stringify({title:s,description:e,sheet:t,respondents:x})})).ok)throw new Error("Failed to create");await j()}catch(D){console.error("Error creating assessment",D)}}function Y(){const s=y.value,e=b.value,t=w.value,x=_.value;if(!s||!t){alert("Please fill in all required fields. :)");return}W(s,e,t,x),R()}return te(()=>{j(),I(),J()}),(s,e)=>(u(),O(re,{breadcrumbs:q},{default:r(()=>[l("div",pe,[a(o(le),null,{default:r(()=>[a(o(ne),null,{default:r(()=>[l("div",ve,[a(o(ae),{modelValue:v.value,"onUpdate:modelValue":e[0]||(e[0]=t=>v.value=t),placeholder:"Search assessment..."},null,8,["modelValue"]),a(o(L),{onClick:H},{default:r(()=>e[9]||(e[9]=[i("Create")])),_:1,__:[9]})])]),_:1}),a(o(ie),null,{default:r(()=>[a(o(ue),null,{default:r(()=>[a(o(de),null,{default:r(()=>[a(o(P),null,{default:r(()=>[a(o(h),{class:"w-1/4"},{default:r(()=>e[10]||(e[10]=[i("Assessment")])),_:1,__:[10]}),a(o(h),{class:"w-1/4"},{default:r(()=>e[11]||(e[11]=[i("Description")])),_:1,__:[11]}),a(o(h),{class:"w-1/4 text-right"},{default:r(()=>e[12]||(e[12]=[i("Created At")])),_:1,__:[12]}),a(o(h),{class:"w-1/4 text-center"},{default:r(()=>e[13]||(e[13]=[i("Actions")])),_:1,__:[13]})]),_:1})]),_:1}),a(o(ce),null,{default:r(()=>[(u(!0),d(A,null,T(K.value,t=>(u(),O(o(P),{key:t.id},{default:r(()=>[a(o(C),{class:"w-1/4 font-medium"},{default:r(()=>[i(m(t.title),1)]),_:2},1024),a(o(C),{class:"w-1/4"},{default:r(()=>[i(m(t.description||"None"),1)]),_:2},1024),a(o(C),{class:"w-1/4 text-right"},{default:r(()=>[i(m(Q(t.created_at)),1)]),_:2},1024),a(o(C),{class:"w-1/4 text-center"},{default:r(()=>[l("div",ge,[a(o(se),{href:s.route("assessment.view",[t.id]),target:"_blank",class:"w-32 px-3 py-2 text-sm bg-primary text-primary-foreground rounded-md hover:opacity-90 transition-colors flex items-center justify-center gap-1 shadow-md"},{default:r(()=>e[14]||(e[14]=[i(" View ")])),_:2,__:[14]},1032,["href"]),a(o(L),{onClick:x=>X(t),class:"w-32 px-3 py-2 text-sm bg-destructive text-destructive-foreground rounded-md hover:opacity-90 transition-colors flex items-center justify-center gap-1 shadow-md"},{default:r(()=>[e[15]||(e[15]=i(" Delete ")),a(o(me),{class:"w-4 h-4"})]),_:2,__:[15]},1032,["onClick"])])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),a(o(B),{modelValue:p.value,"onUpdate:modelValue":e[1]||(e[1]=t=>p.value=t),title:"Confirm Delete",onConfirm:z,onCancel:e[2]||(e[2]=()=>{p.value=!1,c.value=null})},{default:r(()=>{var t;return[l("p",ye,[e[16]||(e[16]=i(" Are you sure you want to delete ")),l("strong",null,m((t=c.value)==null?void 0:t.title),1),e[17]||(e[17]=i("? "))])]}),_:1},8,["modelValue"]),a(o(B),{modelValue:g.value,"onUpdate:modelValue":e[8]||(e[8]=t=>g.value=t),showFooter:S.value,title:"Create New Assessment",onConfirm:Y,onCancel:G},{default:r(()=>[f.value===1?(u(),d("div",be,[e[18]||(e[18]=l("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Assessment Title ",-1)),k(l("input",{"onUpdate:modelValue":e[3]||(e[3]=t=>y.value=t),type:"text",placeholder:"Enter assessment title",class:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:focus:ring-blue-500 dark:bg-gray-700 dark:text-white transition-colors mb-4"},null,512),[[F,y.value]]),e[19]||(e[19]=l("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Description ",-1)),k(l("textarea",{"onUpdate:modelValue":e[4]||(e[4]=t=>b.value=t),placeholder:"Optional description",rows:"3",class:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:focus:ring-blue-500 dark:bg-gray-700 dark:text-white transition-colors"},null,512),[[F,b.value]]),l("div",we,[l("button",{onClick:e[5]||(e[5]=t=>{f.value++,S.value=!0}),class:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg"}," Next ")])])):f.value===2?(u(),d("div",_e,[e[22]||(e[22]=l("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," OMR Sheet ",-1)),k(l("select",{"onUpdate:modelValue":e[6]||(e[6]=t=>w.value=t),class:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 mb-4"},[e[20]||(e[20]=l("option",{value:null,disabled:""},"-- Please select --",-1)),(u(!0),d(A,null,T(E.value,t=>(u(),d("option",{key:t.id,value:t.id},m(t.title),9,xe))),128))],512),[[N,w.value]]),e[23]||(e[23]=l("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Reference for Respondents ",-1)),k(l("select",{"onUpdate:modelValue":e[7]||(e[7]=t=>_.value=t),class:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 mb-4"},[e[21]||(e[21]=l("option",{value:null},"-- Please select --",-1)),(u(!0),d(A,null,T(M.value,t=>(u(),d("option",{key:t.id,value:t.id},m(t.name),9,ke))),128))],512),[[N,_.value]])])):oe("",!0),l("div",he,[l("span",{class:U(["h-2 w-2 rounded-full mx-1",f.value===1?"bg-blue-600":"bg-gray-400"])},null,2),l("span",{class:U(["h-2 w-2 rounded-full mx-1",f.value===2?"bg-blue-600":"bg-gray-400"])},null,2)])]),_:1},8,["modelValue","showFooter"])]),_:1}))}});export{Le as default};
