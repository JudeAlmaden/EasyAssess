import{d as B,r as i,c as k,o as G,a as C,b as x,w as a,e as s,f as n,u as o,g as l,h as R,F as J,i as K,t as g,S as P,k as D,v as V}from"./app-lvJkcK5D.js";import{_ as X}from"./AppLayout.vue_vue_type_script_setup_true_lang-BnqqrvPP.js";import{_ as Q}from"./Input.vue_vue_type_script_setup_true_lang-hMw7eILb.js";import{_ as S}from"./index-BPcQqCfh.js";import{_ as z,a as H,b as I}from"./CardHeader.vue_vue_type_script_setup_true_lang-Bn4Opon9.js";import{_ as W,a as Y,b as E,c as _,d as Z,e as y,f as T}from"./BaseModal-CXQw6ydB.js";import{E as ee}from"./eye-BfwL90iW.js";import"./preload-helper-BfFHrpNk.js";/* empty css            */import"./_commonjsHelpers-Bx2EM-6T.js";import"./useForwardExpose-BFqVVqqo.js";import"./RovingFocusGroup-CJmLcH9n.js";import"./createLucideIcon-Dk3g_DrK.js";import"./AppLogo.vue_vue_type_style_index_0_lang-BmC-BNjO.js";const te={class:"p-5"},re={class:"flex gap-2 items-center"},oe={class:"flex justify-center items-center gap-2"},ae={class:"text-gray-800 dark:text-gray-200"},xe=B({__name:"index",setup(ne){const d=i(!1),c=i(""),f=i(""),p=i(""),m=i(!1),u=i(null),$=[{title:"Respondent Dictionary",href:"/dictionary"}],v=i([]),h=k(()=>{if(!p.value.trim())return v.value;const r=p.value.toLowerCase();return v.value.filter(e=>{var t;return e.name.toLowerCase().includes(r)||((t=e.description)==null?void 0:t.toLowerCase().includes(r))})});G(b);function N(){d.value=!0}function j(){O(c.value,f.value)}function A(){d.value=!1}function F(r){u.value=r,m.value=!0}async function M(){if(u.value)try{const r=w();if(!(await fetch(route("dictionary.delete"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","X-CSRF-TOKEN":r},credentials:"include",body:JSON.stringify({id:u.value.id})})).ok)throw new Error("Delete failed");m.value=!1,u.value=null,b()}catch(r){console.error("Error deleting dictionary:",r)}}async function b(){try{const r=await fetch(route("dictionaries.get"),{headers:{Accept:"application/json"},credentials:"include"});if(!r.ok)throw new Error("Failed to fetch dictionaries");const e=await r.json();v.value=e.dictionaries}catch(r){console.error("Error fetching dictionaries:",r)}}async function O(r,e){try{const t=w(),q=await fetch(route("dictionary.create"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","X-CSRF-TOKEN":t},credentials:"include",body:JSON.stringify({name:r,description:e})});d.value=!1,c.value="",f.value="",b()}catch(t){console.error("Error creating dictionary:",t)}}function w(){const r=document.querySelector('meta[name="csrf-token"]');if(!r||!r.content)throw new Error("CSRF token not found");return r.content}function U(r){return new Date(r).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}const L=k(()=>c.value.trim()!==""&&f.value.trim()!=="");return(r,e)=>(x(),C(X,{breadcrumbs:$},{default:a(()=>[s("div",te,[n(o(z),null,{default:a(()=>[n(o(H),null,{default:a(()=>[s("div",re,[n(o(Q),{modelValue:p.value,"onUpdate:modelValue":e[0]||(e[0]=t=>p.value=t),placeholder:"Search group name or description..."},null,8,["modelValue"]),n(o(S),{class:"text-background",onClick:N},{default:a(()=>e[6]||(e[6]=[l("Create")])),_:1,__:[6]})])]),_:1}),n(o(I),null,{default:a(()=>[n(o(W),null,{default:a(()=>[n(o(Y),null,{default:a(()=>[n(o(E),null,{default:a(()=>[n(o(_),{class:"w-[180px]"},{default:a(()=>e[7]||(e[7]=[l("Group Name")])),_:1,__:[7]}),n(o(_),null,{default:a(()=>e[8]||(e[8]=[l("Description")])),_:1,__:[8]}),n(o(_),{class:"text-right"},{default:a(()=>e[9]||(e[9]=[l("Created At")])),_:1,__:[9]}),n(o(_),{class:"text-center"},{default:a(()=>e[10]||(e[10]=[l("Actions")])),_:1,__:[10]})]),_:1})]),_:1}),n(o(Z),null,{default:a(()=>[(x(!0),R(J,null,K(h.value,t=>(x(),C(o(E),{key:t.id},{default:a(()=>[n(o(y),{class:"font-medium"},{default:a(()=>[l(g(t.name),1)]),_:2},1024),n(o(y),null,{default:a(()=>[l(g(t.description),1)]),_:2},1024),n(o(y),{class:"text-right"},{default:a(()=>[l(g(U(t.created_at)),1)]),_:2},1024),n(o(y),{class:"text-center w-1/4"},{default:a(()=>[s("div",oe,[n(o(P),{href:r.route("dictionary.view",[t.id]),target:"_blank",class:"w-32 px-3 py-2 text-sm bg-primary text-primary-foreground rounded-md hover:opacity-90 transition-colors flex items-center justify-center gap-1 shadow-md text-center"},{default:a(()=>[e[11]||(e[11]=l(" View ")),n(o(ee),{class:"w-4 h-4"})]),_:2,__:[11]},1032,["href"]),n(o(S),{onClick:q=>F(t),class:"w-32 px-3 py-2 text-sm bg-destructive text-destructive-foreground rounded-md hover:opacity-90 transition-colors flex items-center justify-center gap-1 shadow-md text-center"},{default:a(()=>e[12]||(e[12]=[l(" Delete ")])),_:2,__:[12]},1032,["onClick"])])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),n(o(T),{modelValue:d.value,"onUpdate:modelValue":e[3]||(e[3]=t=>d.value=t),title:"Create New Group",onConfirm:j,onCancel:A,confirmDisabled:!L.value},{default:a(()=>[s("div",null,[e[13]||(e[13]=s("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Group Name ",-1)),D(s("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>c.value=t),type:"text",placeholder:"Enter group name Eg. G12-STEM",required:"",class:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:focus:ring-blue-500 dark:bg-gray-700 dark:text-white transition-colors mb-4"},null,512),[[V,c.value]]),e[14]||(e[14]=s("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Description ",-1)),D(s("textarea",{"onUpdate:modelValue":e[2]||(e[2]=t=>f.value=t),required:"",placeholder:"A brief description for the group",rows:"3",class:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:focus:ring-blue-500 dark:bg-gray-700 dark:text-white transition-colors"},null,512),[[V,f.value]])])]),_:1},8,["modelValue","confirmDisabled"]),n(o(T),{modelValue:m.value,"onUpdate:modelValue":e[4]||(e[4]=t=>m.value=t),title:"Confirm Delete",onConfirm:M,onCancel:e[5]||(e[5]=()=>{m.value=!1,u.value=null})},{default:a(()=>{var t;return[s("p",ae,[e[15]||(e[15]=l(" Are you sure you want to delete ")),s("strong",null,g((t=u.value)==null?void 0:t.name),1),e[16]||(e[16]=l("? "))])]}),_:1},8,["modelValue"])]),_:1}))}});export{xe as default};
